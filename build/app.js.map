{"version":3,"sources":["../server/app.js"],"names":["express","require","path","cors","bodyParser","helmet","cookieParser","user","CONFIG","userRoutes","server","app","use","req","res","next","setHeader","json","type","urlencoded","extended","options","static","join","__dirname","get","send","console","log","post","module","exports","err","name","status","message"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,OAAMF,QAAQ,MAAR,CAAV;AACA,IAAIG,aAAWH,QAAQ,aAAR,CAAf;AACA,IAAII,SAAQJ,QAAQ,QAAR,CAAZ;AACA,IAAIK,eAAcL,QAAQ,eAAR,CAAlB;AACA,IAAMM,OAAON,QAAQ,cAAR,CAAb;AACA,IAAIO,SAASP,QAAQ,kBAAR,CAAb;AACA,IAAIQ,aAAaR,QAAQ,sBAAR,CAAjB;AACA,IAAMS,SAAST,QAAS,UAAT,CAAf;;AAGA,IAAMU,MAAMX,SAAZ;AACAW,IAAIC,GAAJ,CAAQT,MAAR;;AAIA;AACAQ,IAAIC,GAAJ,CAAQ,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BD,MAAIE,SAAJ,CAAc,6BAAd,EAA6C,GAA7C;AACAF,MAAIE,SAAJ,CAAc,kCAAd,EAAkD,IAAlD;AACAF,MAAIE,SAAJ,CAAc,8BAAd,EAA8C,CAAC,OAAD,EAAU,MAAV,EAAkB,KAAlB,EAAyB,QAAzB,EAAmC,KAAnC,CAA9C;AACAF,MAAIE,SAAJ,CAAc,8BAAd,EAA8C,CAAC,cAAD,CAA9C;AACAF,MAAIE,SAAJ,CAAc,+BAAd,EAA+C,CAAC,cAAD,CAA/C;AACAD;AACD,CAPD;;AASA;AACAJ,IAAIC,GAAJ,CAAQR,WAAWa,IAAX,EAAR;AACAN,IAAIC,GAAJ,CAAQR,WAAWa,IAAX,CAAgB,EAAEC,MAAM,kBAAR,EAAhB,CAAR;AACAP,IAAIC,GAAJ,CAAQR,WAAWe,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;AACAT,IAAIC,GAAJ,CAAQN,cAAR;;AAEA;AACAK,IAAIC,GAAJ,CAAQP,QAAR;AACA;;AAECM,IAAIU,OAAJ,CAAY,GAAZ,EAAiBlB,MAAjB;;AAGD;AACAQ,IAAIC,GAAJ,CAAQZ,QAAQsB,MAAR,CAAe,UAAf,CAAR;AACAX,IAAIC,GAAJ,CAAQZ,QAAQsB,MAAR,CAAepB,KAAKqB,IAAL,CAAUC,SAAV,EAAqB,iBAArB,CAAf,CAAR;AACAb,IAAIc,GAAJ,CAAQ,GAAR,EAAa,UAACZ,GAAD,EAAMC,GAAN,EAAc;AACzBA,MAAIY,IAAJ,CAAS1B,QAAQsB,MAAR,CAAepB,KAAKqB,IAAL,CAAUC,SAAV,EAAqB,4BAArB,CAAf,CAAT;AACD,CAFD;;AAIAG,QAAQC,GAAR,CAAY,cAAZ,EAA4BpB,OAAOG,GAAnC;;AAGAA,IAAIkB,IAAJ,CAAS,GAAT,EAAcpB,UAAd;;AAKEqB,OAAOC,OAAP,GAAiBpB,GAAjB;;AAEDA,IAAIC,GAAJ,CAAQ,UAACoB,GAAD,EAAMnB,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,EAAyB;AAC9B,MAAIiB,IAAIC,IAAJ,KAAa,mBAAjB,EAAsC;AACpCnB,QAAIoB,MAAJ,CAAW,GAAX,EAAgBjB,IAAhB,CAAqB,EAAC,SAAUe,IAAIC,IAAJ,GAAW,IAAX,GAAkBD,IAAIG,OAAjC,EAArB;AACD;AACF,CAJF","file":"app.js","sourcesContent":["var express = require('express');\r\nvar path = require('path');\r\nvar cors= require('cors')\r\nvar bodyParser=require(\"body-parser\");\r\nvar helmet= require('helmet')\r\nvar cookieParser= require('cookie-parser')\r\nconst user = require('./model/user')\r\nvar CONFIG = require('../config/CONFIG')\r\nvar userRoutes = require('./routes/user.routes')\r\nconst server = require ('./server')\r\n\r\n\r\nconst app = express()\r\napp.use(cors())\r\n\r\n\r\n\r\n//headers\r\napp.use((req, res, next) => {\r\n  res.setHeader('Access-Control-Allow-Origin', '*');\r\n  res.setHeader('Access-Control-Allow-Credentials', true);\r\n  res.setHeader('Access-Control-Allow-Methods', ['PATCH', 'POST', 'GET', 'DELETE', 'PUT']);\r\n  res.setHeader('Access-Control-Allow-Headers', ['Content-Type']);\r\n  res.setHeader('Access-Control-Expose-Headers', ['Content-Type'])\r\n  next();\r\n});\r\n\r\n//body parser for form data\r\napp.use(bodyParser.json())\r\napp.use(bodyParser.json({ type: 'application/json' }))\r\napp.use(bodyParser.urlencoded({ extended: true }))\r\napp.use(cookieParser())\r\n\r\n// secure apps by setting various HTTP headers\r\napp.use(helmet())\r\n// enable CORS - Cross Origin Resource Sharing\r\n\r\n app.options('*', cors()); \r\n\r\n\r\n//fetching index from react\r\napp.use(express.static('./build/'));\r\napp.use(express.static(path.join(__dirname, '../client/build')));\r\napp.get('*', (req, res) => {\r\n  res.send(express.static(path.join(__dirname, '../client/build/index.html')))  ;\r\n});\r\n\r\nconsole.log(\"Environment:\", CONFIG.app)\r\n\r\n\r\napp.post('/', userRoutes)\r\n \r\n \r\n\r\n\r\n  module.exports = app\r\n\r\n app.use((err, req, res, next) => {\r\n    if (err.name === 'UnauthorizedError') {\r\n      res.status(401).json({\"error\" : err.name + \": \" + err.message})\r\n    }\r\n  })\r\n\r\n\r\n"]}